{% extends 'base.html.twig' %}

{% block title %}Profile{% endblock %}

{% block body %}

    <div class="d-flex justify-content-center mb-3">
        <h1>Profile page</h1>
    </div>

    <div class="container mb-4">
       
        <div class="row">

            <div class="col-4 border-right">
                <p>{{ user.email }}<br>
                {{ user.pseudo }}</p>
            </div>

            <div class="col-4">
                <img style="width:200px;height:200px;" src="{{ asset('uploads/image/' ~ user.image ) }}" alt="Image user's">
            </div>

             {% if user.information %}
                <div class="col-3 border-left">
                    <p>{{ user.information.nom }}<br>
                    {{ user.information.prenom }}<br>
                    {{ user.information.dateNaissance|date("Y-m-d") }}<br>
                    {{ user.information.adresse }}<br>
                    {{ user.information.ville }}<br>
                    {{ user.information.cp }}<br>
                    {{ user.information.description }}</p>
                </div>
            {% endif %}
        
        </div> 
        
    </div>

    {% if userConnect == user %}

    <div class="container">
        <button onclick="myDisplay()" class="btn btn-primary mb-2">+</button>
        <div id="george">
            {{ form(addPost) }}
        </div>
    </div>

    {% endif %}

    {% if affichagePosts %}

        {% for affichagePost in affichagePosts %}

            {% if affichagePost.user == user %}

                <div class="container border">

                    <div class="row p-3">
                        <img class="pr-2" style="width:50px;height:50px;" src="{{ asset('uploads/image/' ~ user.image ) }}" alt="Image user's">
                        <p>{{ user.pseudo }}</p> 
                    </div>

                    {% for image in affichagePost.imagePost %}

                        <img style="width:100px;height:100px;" src="{{ asset('uploads/image/' ~ image.image ) }}" alt="">
                    
                    {% endfor %}

                        <div class="row">

                            <div class="container col-8">
                                <p>{{ affichagePost.contenu }}</p>
                                <small>{{ affichagePost.datepost|date("d-m-Y H-i-s") }}</small>
                            </div>

                            <div class="container col-2 d-flex flex-column justify-content-around">
                                <button class="btn btn-sm btn-danger">Supprimer</button>
                                <button class="btn btn-sm btn-primary">Modifier</button>
                            </div>                            

                        </div>
                        
                </div>

            {% endif %}

        {% endfor %}

    {% endif %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="{{ asset('js/profile.js') }}"></script>
{% endblock %}